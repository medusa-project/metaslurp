<% provide(:body_id, 'landing') %>

<% row1_crop = { width: 3000, height: 400 } %>
<% rown_crop = { width: 1500, height: 400 } %>

<div id="dl-banner">
  <h1><span>Digital Collections</span></h1>

  <div class="row justify-content-sm-center">
    <div class="col-sm-8 col-md-7 col-lg-6">
      <%= form_tag(search_path, method: :get, enforce_utf8: false, id: 'dl-search') do %>
        <div class="input-group mb-4">
          <%= search_field_tag(:q, '',
                               placeholder: raw("Search across #{number_with_delimiter(@num_items)} items&hellip;"),
                               'aria-label': 'Search',
                               class: 'form-control form-control-lg') %>
          <div class="input-group-append">
            <input type="submit" value="Search" class="btn btn-primary">
          </div>
          <div class="input-group-append dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button"
                    id="dl-browse-dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Browse
            </button>
            <div class="dropdown-menu" aria-labelledby="dl-browse-dropdown">
              <%= link_to 'Collections', collections_path('fq[]': 'system_keyword_service_key:dls'), class: 'dropdown-item' %>
              <%= link_to 'Items', items_path, class: 'dropdown-item' %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>

<div class="row">
  <% if @services[:dls] %>
    <div class="col-md-12">
      <div class="card bg-dark text-white">
        <%= thumbnail_for(@services[:dls],
                          crop: row1_crop,
                          class: 'card-img-top d-none d-lg-block',
                          alt: "Thumbnail for #{@services[:dls]}") %>
        <%= thumbnail_for(@services[:dls],
                          crop: { width: row1_crop[:width] / 2.0, height: row1_crop[:height] },
                          class: 'card-img-top d-lg-none',
                          alt: "Thumbnail for #{@services[:dls]}") %>
        <div class="card-img-overlay d-flex flex-column justify-content-end">
          <div class="dl-card-text-backdrop">
            <h5 class="card-title">
              <%= link_to 'Digital Special Collections', @services[:dls].uri %>
            </h5>
            <p class="card-text d-none d-sm-block">
              <%= @services[:dls].description %>
            </p>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>

<div class="row">
  <% if @services[:ideals] %>
    <div class="col-lg-6">
      <div class="card bg-dark text-white">
        <%= thumbnail_for(@services[:ideals],
                          crop: rown_crop,
                          class: 'card-img-top',
                          alt: "Thumbnail for #{@services[:ideals]}") %>
        <div class="card-img-overlay d-flex flex-column justify-content-end">
          <div class="dl-card-text-backdrop">
            <h5 class="card-title">
              <%= link_to 'Scholarship', @services[:ideals].uri %>
            </h5>
            <p class="card-text d-none d-sm-block">
              <%= @services[:ideals].description %>
            </p>
          </div>
        </div>
      </div>
    </div>
  <% end %>
  <% if @services[:book] %>
    <div class="col-lg-6">
      <div class="card bg-dark text-white">
        <%= thumbnail_for(@services[:book],
                          crop: rown_crop,
                          class: 'card-img-top',
                          alt: "Thumbnail for #{@services[:book]}") %>
        <div class="card-img-overlay d-flex flex-column justify-content-end">
          <div class="dl-card-text-backdrop">
            <h5 class="card-title">
              <%= link_to 'Digitized Books',
                          items_path('fq[]': 'system_keyword_service_key:book') %>
            </h5>
            <p class="card-text d-none d-sm-block">
              <%= @services[:book].description %>
            </p>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>

<div class="row">
  <% if @services[:databank] %>
    <div class="col-lg-6">
      <div class="card bg-dark text-white">
        <%= thumbnail_for(@services[:databank],
                          crop: rown_crop,
                          class: 'card-img-top',
                          alt: "Thumbnail for #{@services[:databank]}") %>
        <div class="card-img-overlay d-flex flex-column justify-content-end">
          <div class="dl-card-text-backdrop">
            <h5 class="card-title">
              <%= link_to 'Research Data', @services[:databank].uri %>
            </h5>
            <p class="card-text d-none d-sm-block">
              <%= @services[:databank].description %>
            </p>
          </div>
        </div>
      </div>
    </div>
  <% end %>
  <% if @services[:idnc] %>
    <div class="col-lg-6">
      <div class="card bg-dark text-white">
        <%= thumbnail_for(@services[:idnc],
                          crop: rown_crop,
                          class: 'card-img-top',
                          alt: "Thumbnail for #{@services[:idnc]}") %>
        <div class="card-img-overlay d-flex flex-column justify-content-end">
          <div class="dl-card-text-backdrop">
            <h5 class="card-title">
              <%= link_to 'Digitized Newspapers', @services[:idnc].uri %>
            </h5>
            <p class="card-text d-none d-sm-block">
              <%= @services[:idnc].description %>
            </p>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>